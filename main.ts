/** 
Title:Castle Descent
Creators:Adam and Eli
Description:

 */
// creating backgrounds
scene.setBackgroundImage(img`
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffff
    fffffff1fffffffffffffffffffffffffffffff1ffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffff1ffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffccffffffcffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffcccfffffcffffffffffffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffcccccffffccffffffffffcccffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffcccccccfffccffffffffffcccffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffcfccccfffcccfffffffffcccccfffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffff1ffffffffffffffffffcccccfffccccffffffffccccccfffffffffffff1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffcccccccfffccffffffffffccccfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffccccfccffcccfffffffccccccfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffccccccfffcccfffffffffccccccffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffccfcccccffccccfffffffcccccfccfffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1fffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffccccccccccccffffffcccccccfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffcccccccccccccccccccffccccccffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffcffffffffffcccccccccccccccccccccffccccccffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffcffffffffffffffffff
    ffffffffffffcccfffffffffffcccccccccccccccccccccccffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffcffffccffffffffffffffffff
    ffffffffffffccffffffffffccccccccccccccccccccccccccffffffffffffffffffffffffffffffffffcffffffffffffffffffffffffffffffffffffffffffffffffffccfffccffffffffffffffffff
    fffffffffffcccfffffffffccccccccccccccccccccccccccccfffffffffffffffffffffffffffffffffccfffffffffffffffffffffffffffffffffffffffffffffffffccffcccffffffffffffffffff
    ffffffffffcccccffffffcccccccccccccccccccccccccccccccffffffffffffffffffffffffffffffffccffffffffffffffffffffffffffffffffffffffffffffcfffccccfcccccffffffffffffffff
    fffffffffffcccfffffccccccccccccccccccccccccccccccccccffffffffffffffffffffffffffffffccccffffffffffffffffffffffffffffffffffffffffffcccffccccffccffffffffffffffffff
    ffffffffffffcccfffccccccccccccccccccccccccccccccccccccfffffffffffffffffffffffffffffccccffffcfffffffffffffffffffffffffffffffffffffcccfffccffccccccfffffffffffffff
    ffffffffffccccffcccccccccccccccccccccccccccccccccccccccfffffffffffffffffffffccffffffccfffffcffffffffffffffffffffffffffffffffffffccccfcccccccccfffffffffcffffffff
    fffffffffffcccccccccccccccccccccccccccccccccccccccccccccfffffffffffffffffffcccffffccccccfffccfffffffffffffffffffffffffffffffffffffcccfccccfffccffffffffcffffffff
    ffffffffffffcccccccccccccccccccccccccccccccccccccccccccccfffffffffffffffffccccfffffccccffffccffffffffffffffffffffffffffffffffffffcccffcccccffcffffffffccccffffff
    ffffffffffffccccccccccccccccccccccccccccccccccccccccccccccffffffffffffffffffcccffffcccccffcccfffffffffffffcffffffffffffffffffffcccccccccccccfcfffffffffcffffffff
    fffffffffffcccccccccccccccccccccccccccccccccccccccccccccccffffffffffffffffccccccfccccccccfccccfffffffffffccfffffffffffffffffffffcccccccccccccccccffffccccfffffff
    ffffffffffcccccccccccccccccccccccccccccccccccccccccccccccccfffff1ffffffffccccccfccccccccccfccffffffffffffcccfffffffffffffcfffffcccccffcccccccccccccfffcccfffffff
    ffffffffccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffffffffffccccccffccccffffcccffffffffffcccccffffffffffffcffffccccccccccccccccccccccffcccccfffff
    fffffffccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffffffffccccccffccccccffcccffffffffffcccccccfffffffffffccfffffccccccccccccccccccccccccccffffff
    ffffffccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffffffcccccccccccccccccccccccfffffffcfccccffffffffffffccffffccccccccccccccccccccccccccfffffff
    fffffccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffffffffcccccccccccccccccccccccfffffcccccfffffffffffcccffffccccccccccccccccccccccccccfffffff
    fffcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffffffccccccccccccccccccccccccccffcccccccfffffffffffcffffccccccccccccccccccccccccccccffffff
    ffcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccffffffffccccccccccccccccccccccccccccccfccccfcffffffffffccccffccccccccccccccccccccccccccccccffff
    fccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffcccccccccccccccccccccccccccccccccccccffffffffffffccffcccccccccccccccccccccccccccccccccff
    ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffcccccccccccccccccccccccccccccccccccccccfffffffffccccccccccccccccccccccccccccccccccccccccc
    ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccffffffffffcccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccffffffffffccccccccccccccccccccccccccccccccccccccc
    ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfffffffccccccccccccccccccccccccccccccccccccccccc
    ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccffffcccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
`)
// game.splash("Press A to jump")
// game.splash("You can climb walls by pressing A while against a wall")
// game.splash("Press B to shoot arrows and slow the ghost")
// tilemaps
scene.setTileMap(img`
    ................................................
    ................................................
    7777...........................................6
    .............777...........................74477
    ......7777........7......................7..447.
    ...................7.............77.....7...44..
    ....................7.........7......77.....44..
    .............................7..............44..
    ...........777777.......777.................44..
    ..........77..........7.....................44..
    .........77........7........................44..
    ........77..................................44..
    .....77.....................................44..
    ....77......................................44..
    777774444444444444444444444444444444444444444444
    444444444444444444444444444444444444444444444444
`)
// tilemap
scene.setTile(7, img`
    b d d d d d d d d d d d d d d c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    d b b b b b b b b b b b b b b c
    c c c c c c c c c c c c c c c a
`, true)
// ground
scene.setTile(6, img`
    c c c c c c c c c c c c c c c c
    c c c c c c c c c c c b b b b c
    c c c c c c c c c c c b b b b c
    c c c c c c c c c c c b b b b c
    c c c c c c b b b b c b b b b c
    c c c c c c b b b b c b b b b c
    c c c c c c b b b b c b b b b c
    c c c c c c b b b b c b b b b c
    c b b b b c b b b b c b b b b c
    c b b b b c b b b b c d d d d c
    c b b b b c b b b b b b b b b c
    c b b b b c d d d d b b b b b c
    c b b b b c b b b b b b b b b c
    c b b b b b b b b b b b b b b c
    c d d d d b b b b b b b b b b c
    c b b b b b b b b b b b b b b c
`, true)
// exit
scene.setTile(2, img`
    d 1 1 1 1 b 1 1 1 1 1 1 1 1 1 b
    1 d d d d d b d d d d d d d d b
    1 d d d d d b d d d d d d d d b
    1 d d d d d d b d d d d d d d b
    1 d d d d d d b d d d d d d d b
    1 d d d d d d b d d d d d d d b
    1 d d d d d d d b d d d d d d b
    1 d d d d d d d d b d d d d d b
    1 d d d d d d d d b d d d d d b
    1 d d d d d d d b 1 b b d d d b
    1 d d d d d d d b 1 d d b b d b
    1 d d d d d d b 1 d d d d d b b
    1 d d d d d b b 1 d d d d d d b
    1 d d d d d b 1 d d d d d d d b
    1 d d d d b b 1 d d d d d d d b
    b b b b b b b b b b b b b b b b
`, true)
// cracked wall
scene.setTile(4, img`
    5 4 4 5 5 4 4 4 4 2 2 2 4 4 4 4
    4 4 4 4 4 5 5 4 2 2 2 2 4 4 4 5
    4 2 2 2 4 4 5 4 2 2 4 4 5 5 5 5
    2 2 4 2 4 4 5 4 2 2 4 5 5 5 5 4
    2 2 2 2 4 4 5 4 2 2 4 4 5 5 4 4
    4 2 2 2 4 5 5 4 4 4 4 4 4 4 4 2
    2 2 2 4 4 5 5 5 4 4 2 2 2 2 2 2
    4 2 2 4 5 5 5 5 4 2 2 4 2 2 2 4
    5 4 4 4 4 4 4 5 5 4 2 2 2 4 4 4
    4 4 4 2 2 2 4 4 5 5 4 4 4 4 5 5
    4 2 2 2 2 2 2 2 4 5 5 5 5 5 5 5
    5 4 4 2 4 2 2 4 4 5 5 5 4 4 4 5
    5 5 4 2 2 2 4 4 4 5 5 4 2 2 2 4
    4 5 4 4 4 4 5 5 5 5 4 2 4 2 2 4
    4 5 5 5 5 5 5 4 4 4 2 4 2 4 2 4
    4 5 5 5 4 4 4 4 2 2 2 2 4 2 4 4
`, true)
// lava
scene.setTile(5, img`
    . . . . . . . . . . . . . . . .
    . . . . . . 6 6 6 6 . . . . . .
    . . . . 6 6 6 5 5 6 6 6 . . . .
    . . . 7 7 7 7 6 6 6 6 6 6 . . .
    . . 6 7 7 7 7 8 8 8 1 1 6 6 . .
    . . 7 7 7 7 7 8 8 8 1 1 5 6 . .
    . 6 7 7 7 7 8 8 8 8 8 5 5 6 6 .
    . 6 7 7 7 8 8 8 6 6 6 6 5 6 6 .
    . 6 6 7 7 8 8 6 6 6 6 6 6 6 6 .
    . 6 8 7 7 8 8 6 6 6 6 6 6 6 6 .
    . . 6 8 7 7 8 6 6 6 6 6 8 6 . .
    . . 6 8 8 7 8 8 6 6 6 8 6 6 . .
    . . . 6 8 8 8 8 8 8 8 8 6 . . .
    . . . . 6 6 8 8 8 8 6 6 . . . .
    . . . . . . 6 6 6 6 . . . . . .
    . . . . . . . . . . . . . . . .
`, true)
// destroy ghost
// creating sprites
let Knight = sprites.create(img`
    . . . . . . f f f f f f . . . .
    . . . . f f e e e e f 2 f . . .
    . . . f f e e e e f 2 2 2 f . .
    . . . f e e e f f e e e e f . .
    . . . f f f f e e 2 2 2 2 e f .
    . . . f e 2 2 2 f f f f e 2 f .
    . . f f f f f f f e e e f f f .
    . . f f e 4 4 e b f 4 4 e e f .
    . . f e e 4 d 4 1 f d d e f . .
    . . . f e e e 4 d d d d f . . .
    . . . . f f e e 4 4 4 e f . . .
    . . . . . 4 d d e 2 2 2 f . . .
    . . . . . e d d e 2 2 2 f . . .
    . . . . . f e e f 4 5 5 f . . .
    . . . . . . f f f f f f . . . .
    . . . . . . . f f f . . . . . .
`, SpriteKind.Player)
tiles.placeOnTile(Knight, tiles.getTileLocation(3, 1))
Knight.ay = 175
scene.cameraFollowSprite(Knight)
// controls
controller.moveSprite(Knight, 75, 0)
controller.player1.onButtonEvent(ControllerButton.B, ControllerButtonEvent.Pressed, function on_button_event_b_pressed() {
    let arrow: Sprite;
    // shoot arrow
    if (controller.dx() > 0) {
        arrow = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . b . . . .
            . . e e e e e e e e e b b . . .
            . . . . . . . . . . . b . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
        `, Knight, 100, 0)
    } else if (controller.dx() < 0) {
        arrow = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . b . . . . . . . . . . .
        . . . b b e e e e e e e e e . .
        . . . . b . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        `, Knight, -100, 0)
    } else {
        arrow = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . b . . . . . . . . . . .
        . . . b b e e e e e e e e e . .
        . . . . b . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        `, Knight, -100, 0)
    }
    
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function on_jump() {
    // jump
    if (Knight.isHittingTile(CollisionDirection.Bottom)) {
        Knight.vy = -85
    } else if (Knight.isHittingTile(CollisionDirection.Left)) {
        // wall jump
        Knight.vy = -85
    } else if (Knight.isHittingTile(CollisionDirection.Right)) {
        Knight.vy = -85
    }
    
})
game.onUpdate(function on_update() {
    // turn sprite
    if (controller.dx() > 0) {
        Knight.setImage(img`
        . . . . . . f f f f f f . . . .
        . . . . f f e e e e f 2 f . . .
        . . . f f e e e e f 2 2 2 f . .
        . . . f e e e f f e e e e f . .
        . . . f f f f e e 2 2 2 2 e f .
        . . . f e 2 2 2 f f f f e 2 f .
        . . f f f f f f f e e e f f f .
        . . f f e 4 4 e b f 4 4 e e f .
        . . f e e 4 d 4 1 f d d e f . .
        . . . f e e e 4 d d d d f . . .
        . . . . f f e e 4 4 4 e f . . .
        . . . . . 4 d d e 2 2 2 f . . .
        . . . . . e d d e 2 2 2 f . . .
        . . . . . f e e f 4 5 5 f . . .
        . . . . . . f f f f f f . . . .
        . . . . . . . f f f . . . . . .
        `)
    }
    
    if (controller.dx() < 0) {
        Knight.setImage(img`
            . . . . f f f f f f . . . . . .
            . . . f 2 f e e e e f f . . . .
            . . f 2 2 2 f e e e e f f . . .
            . . f e e e e f f e e e f . . .
            . f e 2 2 2 2 e e f f f f . . .
            . f 2 e f f f f 2 2 2 e f . . .
            . f f f e e e f f f f f f f . .
            . f e e 4 4 f b e 4 4 e f f . .
            . . f e d d f 1 4 d 4 e e f . .
            . . . f d d d d 4 e e e f . . .
            . . . f e 4 4 4 e e f f . . . .
            . . . f 2 2 2 e d d 4 . . . . .
            . . . f 2 2 2 e d d e . . . . .
            . . . f 5 5 4 f e e f . . . . .
            . . . . f f f f f f . . . . . .
            . . . . . . f f f . . . . . . .
        `)
    }
    
})
// enemies
let enemy = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......fd1111111f.......
    ......fdd1111111df......
    ......fddd111111df......
    ......fdddddd111df......
    ......fbddddbfd1df......
    ......fcbbbdcfddbf......
    .......fcbb11111f.......
    ........fffff1b1f.......
    ........fb111cfbf.......
    ........ffb1b1ff........
    ......f.fffbfbf.........
    ......ffffffff..........
    .......fffff............
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy)
tiles.placeOnTile(enemy, tiles.getTileLocation(0, 1))
// put enemy at starting point
enemy.follow(Knight, 110, 25)
// make enemy chase the player 
//  info
info.setLife(3)
info.setScore(0)
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function on_overlap(sprite: Sprite, otherSprite: Sprite) {
    // hurt player when hitting enemy
    info.changeLifeBy(-1)
    // TODO try and make true invincibility frames
    enemy.setFlag(SpriteFlag.Ghost, true)
    enemy.vx = 0
    enemy.vy = 0
})
sprites.onOverlap(SpriteKind.Enemy, SpriteKind.Projectile, function on_overlap2(sprite: Sprite, otherSprite: Sprite) {
    // stun enemy
    enemy.vx = -25
    enemy.vy = 0
})
info.onLifeZero(function on_life_zero() {
    // lose when dying
    game.over(false)
})
scene.onHitTile(SpriteKind.Player, 4, function on_hit_tile(Knight: Sprite) {
    // reset on hit lava
    info.changeLifeBy(-1)
    tiles.placeOnTile(enemy, tiles.getTileLocation(0, 13))
    tiles.placeOnTile(Knight, tiles.getTileLocation(3, 13))
    enemy.vx = 0
    enemy.vy = 0
})
scene.onHitTile(SpriteKind.Player, 6, function on_hit_tile2(sprite: Sprite) {
    // win when hitting exit
    info.changeScoreBy(1)
    if (info.score() == 1) {
        scene.setTileMap(img`
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ..................................777..........6
            .............................7777............777
            ...........................7.............777....
            ......................7777..........7777........
            ...................7..............7.............
            ..............7..7.............7777.............
            ..2..77777..7........7777..777..................
            777777..........................................
            444444444444444444444444444444444444444444444444
        `)
    } else if (info.score() == 2) {
        scene.setTileMap(img`
            ..............7.................................
            ..............7.................................
            ..............7.................................
            ..............7...777777777.....................
            ..............7...7.......7..7.......7.....7....
            ..............7...7.......7.........7...7......6
            ..............7...7.......7.......7..........7..
            ..............7...7.......7....7................
            ..............7...7.......7...7.................
            ..............2...7.......7.....................
            ..........777777777.......7777777777777777777777
            .........7......................................
            ........77......................................
            ......7.........................................
            7777777.........................................
            444444444444444444444444444444444444444444444444
        `)
        scene.setTile(2, img`
        d 1 1 1 1 b 1 1 1 1 1 1 1 1 1 b
        1 d d d d d b d d d d d d d d b
        1 d d d d d b d d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d d b d d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d b 1 b b d d d b
        1 d d d d d d d b 1 d d b b d b
        1 d d d d d d b 1 d d d d d b b
        1 d d d d d b b 1 d d d d d d b
        1 d d d d d b 1 d d d d d d d b
        1 d d d d b b 1 d d d d d d d b
        b b b b b b b b b b b b b b b b
        `, true)
    } else if (info.score() == 3) {
        scene.setTileMap(img`
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ............77774.747474..74774.74...74....74..6
            ............7............7........74....74..4777
            ............7...................................
            ............7...................................
            ............7...................................
            ............7......................7............
            ............2...77774477..7.....7.....7.....7..6
            ..........7777......44.......7...........7....77
            77777777............44..........................
            444444444444444444444444444444444444444444444444
        `)
        scene.setTile(2, img`
        d 1 1 1 1 b 1 1 1 1 1 1 1 1 1 b
        1 d d d d d b d d d d d d d d b
        1 d d d d d b d d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d d b d d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d b 1 b b d d d b
        1 d d d d d d d b 1 d d b b d b
        1 d d d d d d b 1 d d d d d b b
        1 d d d d d b b 1 d d d d d d b
        1 d d d d d b 1 d d d d d d d b
        1 d d d d b b 1 d d d d d d d b
        b b b b b b b b b b b b b b b b
        `, true)
    } else if (info.score() == 4) {
        scene.setTileMap(img`
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ................................................
            ........................7.......................
            ..................7..7.......77......7.........6
            ...............7..........7.......7......7....77
            .........7..7...............................7...
            ......7.........................................
            7777777.........................................
            444444444444444444444444444444444444444444444444
        `)
        scene.setTile(2, img`
        d 1 1 1 1 b 1 1 1 1 1 1 1 1 1 b
        1 d d d d d b d d d d d d d d b
        1 d d d d d b d d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d d b d d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d b 1 b b d d d b
        1 d d d d d d d b 1 d d b b d b
        1 d d d d d d b 1 d d d d d b b
        1 d d d d d b b 1 d d d d d d b
        1 d d d d d b 1 d d d d d d d b
        1 d d d d b b 1 d d d d d d d b
        b b b b b b b b b b b b b b b b
        `, true)
    } else if (info.score() == 5) {
        scene.setTileMap(img`
            ................................................................................................
            ................................................................................................
            ................................................................................................
            ................................................................................................
            ................................................................................................
            ................................................................................................
            ..................................................................7.........7.......7.....7....7
            ...............................................................7..7..7...7......7...............
            ............................................................7.....7.....................7....7..
            .............7...........................................7........7.............................
            ................7..7.........7.......7................7...........7.............................
            ......777777..........7..7.......7.......7.........7..............7.............................
            .....7777777.................................7..7.................7.............................
            ....77777777......................................................7.............................
            777777777777......................................................7.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            7777777777777777777777777777777777777777777777777777777777777777777.............................
            77777777777777777777777777777777777777777777777777777777777777777776.....7777.........7777.....5
            7777777777777777777777777777777777777777777777777777777777777777777777..........7777........7777
            777777777777777777777777777777777777777777777777777777777777777777744444444444444444444444444444
            777777777777777777777777777777777777777777777777777777777777777777744444444444444444444444444444
            777777777777777777777777777777777777777777777777777777777777777777744444444444444444444444444444
        `)
        scene.setTile(2, img`
        d 1 1 1 1 b 1 1 1 1 1 1 1 1 1 b
        1 d d d d d b d d d d d d d d b
        1 d d d d d b d d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d b d d d d d d d b
        1 d d d d d d d b d d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d d b d d d d d b
        1 d d d d d d d b 1 b b d d d b
        1 d d d d d d d b 1 d d b b d b
        1 d d d d d d b 1 d d d d d b b
        1 d d d d d b b 1 d d d d d d b
        1 d d d d d b 1 d d d d d d d b
        1 d d d d b b 1 d d d d d d d b
        b b b b b b b b b b b b b b b b
        `, true)
    } else if (info.score() == 6) {
        game.over(true)
    }
    
    tiles.placeOnTile(enemy, tiles.getTileLocation(0, 13))
    tiles.placeOnTile(Knight, tiles.getTileLocation(3, 13))
    enemy.vx = 0
    enemy.vy = 0
})
scene.onHitTile(SpriteKind.Enemy, 7, function on_hit_tile3(enemy: Sprite) {
    enemy.setFlag(SpriteFlag.Ghost, true)
})
scene.onHitTile(SpriteKind.Projectile, 2, function on_hit_tile4(sprite: Sprite) {
    scene.setTile(2, img`
        d 1 1 1 1 1 1 b d 1 1 1 1 1 1 b
        1 d d d d d d b 1 d d d d d d b
        1 d d d d d d b 1 d d d d d d b
        1 d d d d d d b 1 d d d d d b b
        1 d d d d d d b 1 d d b b b c c
        1 d d d d d d d b b b c c c c c
        1 d d d d d d e b c 1 c c c c c
        b b b b b b e c c 1 d d c c c c
        c c c 1 c c c c c 1 d d c c c c
        c c c 1 1 c c c c c 1 d d c c c
        c c c 1 d d c c c c 1 d d c c c
        c c 1 d d d c c c c c d d d c c
        c c 1 d d d d c c c c d d b c c
        c c 1 d d d d d c c c b b c c c
        c c c b b b d d d b c c c c c c
        c c c c c c b b b c c c c c c c
    `, false)
})
scene.onHitTile(SpriteKind.Player, 5, function on_hit_tile5(sprite: Sprite) {
    enemy.destroy()
    scene.setTile(5, img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `, false)
})
game.onUpdateInterval(1000, function on_update_interval() {
    enemy.setFlag(SpriteFlag.Ghost, false)
})
